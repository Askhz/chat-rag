tools:
  # server tools
  - name: "codebase_search"
    type: "server"
    description: |
      Find snippets of code from the codebase most relevant to the search query.
      This is a semantic search tool, so the query should ask for something semantically matching what is needed.
      If it makes sense to only search in particular directories, please specify them in the target_directories field.
      Unless there is a clear reason to use your own search query, please just reuse the user's exact query with their wording.
      Their exact wording/phrasing can often be helpful for the semantic search query. Keeping the same exact question format can also be helpful.
    
    endpoint: "/codebase-indexer/api/v1/search/semantic"
    method: "GET"
    
    auth:
      type: "bearer"
      location: "header"
    
    parameters:
      - name: "query"
        type: "string"
        description: "The search query to find relevant code. You should reuse the user's exact query/most recent message with their wording unless there is a clear reason not to."
        required: true
        in: "query"  # parameters position in the request(query/path/header)
      
      - name: "target_directories"
        type: "array"
        description: "Glob patterns for directories to search over"
        items:
          type: "string"
        in: "query"
      
      - name: "explanation"
        type: "string"
        description: "One sentence explanation as to why this tool is being used, and how it contributes to the goal."
        in: "query"
      
      - name: "topK"
        type: "integer"
        description: "Number of results to return (default 10)"
        default: 10
        in: "query"
      
      - name: "clientId"
        type: "string"
        description: "User machine identifier (e.g. MAC address)"
        required: true
        in: "query"
      
      - name: "codebasePath"
        type: "string"
        description: "Absolute path to the codebase"
        required: true
        in: "query"

  # IDE tools
  - name: "search_files"
    type: "ide"
    description: |
      Request to perform a regex search across files in a specified directory, providing context-rich results.
      This tool searches for patterns or specific content across multiple files, displaying each match with encapsulating context.
    parameters:
      - name: "path"
        type: "string"
        description: "The path of the directory to search in (relative to the current workspace directory)"
        required: true
      
      - name: "regex"
        type: "string"
        description: "The regular expression pattern to search for (uses Rust regex syntax)"
        required: true
      
      - name: "file_pattern"
        type: "string"
        description: "Glob pattern to filter files (e.g., '*.ts' for TypeScript files). If not provided, searches all files"

  - name: "list_files"
    type: "ide"
    description: |
      Request to list files and directories within the specified directory.
      If recursive is true, lists all files and directories recursively.
      Do not use this tool to confirm file creation - user will provide feedback.
    parameters:
      - name: "path"
        type: "string"
        description: "The path of the directory to list (relative to current workspace directory)"
        required: true
      
      - name: "recursive"
        type: "boolean"
        description: "Whether to list files recursively (default: false)"
        default: false